# å®å¡”é¢æ¿å¸è½½æŒ‡å—

æœ¬æŒ‡å—æä¾›äº†å®Œæ•´çš„å®å¡”é¢æ¿å¸è½½è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æ•°æ®å¤‡ä»½å’Œå®‰å…¨å¸è½½æµç¨‹ã€‚

## ğŸ“‹ å¸è½½è„šæœ¬è¯´æ˜

### 1. å®Œæ•´å¸è½½è„šæœ¬ (`uninstall-bt.sh`)
- **åŠŸèƒ½**: å®Œæ•´çš„å®å¡”é¢æ¿å¸è½½ï¼ŒåŒ…å«æ•°æ®å¤‡ä»½
- **ç‰¹ç‚¹**: å®‰å…¨ã€å¯é ã€æ”¯æŒæ•°æ®æ¢å¤
- **æ¨è**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨

### 2. å¿«é€Ÿå¸è½½è„šæœ¬ (`quick-uninstall-bt.sh`)
- **åŠŸèƒ½**: åŸºäºå®˜æ–¹æ­¥éª¤çš„å¿«é€Ÿå¸è½½
- **ç‰¹ç‚¹**: ç®€å•ã€å¿«é€Ÿã€æ— å¤‡ä»½
- **æ¨è**: æµ‹è¯•ç¯å¢ƒæˆ–ç¡®å®šä¸éœ€è¦æ•°æ®æ—¶ä½¿ç”¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ¡ˆä¸€ï¼šå®Œæ•´å¸è½½ï¼ˆæ¨èï¼‰

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x uninstall-bt.sh

# äº¤äº’å¼å¸è½½ï¼ˆæ¨èï¼‰
sudo ./uninstall-bt.sh

# è·³è¿‡å¤‡ä»½ç›´æ¥å¸è½½
sudo ./uninstall-bt.sh --skip-backup

# å¼ºåˆ¶å¸è½½ä¸è¯¢é—®
sudo ./uninstall-bt.sh --force

# å¸è½½å®Œæˆåè‡ªåŠ¨é‡å¯
sudo ./uninstall-bt.sh --auto-reboot
```

### æ–¹æ¡ˆäºŒï¼šå¿«é€Ÿå¸è½½

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x quick-uninstall-bt.sh

# å¿«é€Ÿå¸è½½
sudo ./quick-uninstall-bt.sh
```

### æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨å¸è½½

```bash
# 1. åœæ­¢å®å¡”é¢æ¿æœåŠ¡
/etc/init.d/bt stop
systemctl stop bt
systemctl stop bt-panel

# 2. åˆ é™¤å®å¡”é¢æ¿ç›®å½•
rm -rf /www/server/panel

# 3. åˆ é™¤å®å¡”é…ç½®æ–‡ä»¶
rm -rf /etc/bt

# 4. ç¦ç”¨å®å¡”æœåŠ¡
systemctl disable bt
systemctl disable bt-panel

# 5. é‡å¯æœåŠ¡å™¨
reboot
```

## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### å¸è½½å‰å‡†å¤‡

1. **å¤‡ä»½é‡è¦æ•°æ®**
   - ç½‘ç«™æ–‡ä»¶
   - æ•°æ®åº“
   - SSL è¯ä¹¦
   - é…ç½®æ–‡ä»¶

2. **è®°å½•é‡è¦ä¿¡æ¯**
   - æ•°æ®åº“å¯†ç 
   - ç½‘ç«™åŸŸåé…ç½®
   - ç«¯å£è®¾ç½®
   - é˜²ç«å¢™è§„åˆ™

3. **ç¡®è®¤å¸è½½èŒƒå›´**
   - æ˜¯å¦ä¿ç•™ç½‘ç«™æ•°æ®
   - æ˜¯å¦ä¿ç•™æ•°æ®åº“
   - æ˜¯å¦æ¸…ç†é˜²ç«å¢™è§„åˆ™

### æ•°æ®å¤‡ä»½å»ºè®®

```bash
# å¤‡ä»½ç½‘ç«™æ•°æ®
tar -czf websites-backup.tar.gz /www/wwwroot/

# å¤‡ä»½æ•°æ®åº“
mysqldump --all-databases > all-databases.sql

# å¤‡ä»½ SSL è¯ä¹¦
tar -czf ssl-backup.tar.gz /www/server/panel/vhost/cert/

# å¤‡ä»½å®å¡”é…ç½®
tar -czf bt-config-backup.tar.gz /etc/bt/
```

## ğŸ“Š å¸è½½æµç¨‹è¯¦è§£

### å®Œæ•´å¸è½½æµç¨‹ï¼ˆ8 æ­¥ï¼‰

1. **æ£€æŸ¥å®å¡”å®‰è£…çŠ¶æ€**
   - æ£€æµ‹å®å¡”ç›®å½•
   - æ£€æŸ¥ç³»ç»ŸæœåŠ¡
   - éªŒè¯è¿›ç¨‹çŠ¶æ€

2. **å¤‡ä»½é‡è¦æ•°æ®**
   - å®å¡”é…ç½®æ–‡ä»¶
   - é¢æ¿æ•°æ®
   - ç½‘ç«™æ•°æ®ï¼ˆå¯é€‰ï¼‰
   - MySQL æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰

3. **åœæ­¢å®å¡”æœåŠ¡**
   - åœæ­¢é¢æ¿æœåŠ¡
   - ç»ˆæ­¢ç›¸å…³è¿›ç¨‹
   - ç¡®ä¿å®Œå…¨åœæ­¢

4. **ç¦ç”¨å®å¡”æœåŠ¡**
   - ç¦ç”¨ç³»ç»ŸæœåŠ¡
   - åˆ é™¤æœåŠ¡æ–‡ä»¶
   - é‡è½½ systemd

5. **åˆ é™¤å®å¡”æ–‡ä»¶**
   - åˆ é™¤é¢æ¿ç›®å½•
   - åˆ é™¤é…ç½®ç›®å½•
   - æ¸…ç†ç›¸å…³æ–‡ä»¶

6. **æ¸…ç†å®å¡”é…ç½®**
   - æ¸…ç†å®šæ—¶ä»»åŠ¡
   - åˆ é™¤ç¯å¢ƒå˜é‡
   - æ¸…ç†å¯åŠ¨è„šæœ¬

7. **æ¸…ç†é˜²ç«å¢™è§„åˆ™**
   - åˆ é™¤å®å¡”ç«¯å£è§„åˆ™
   - æ¸…ç†ç›¸å…³é˜²ç«å¢™é…ç½®

8. **éªŒè¯å¸è½½ç»“æœ**
   - æ£€æŸ¥æ®‹ç•™æ–‡ä»¶
   - éªŒè¯æœåŠ¡çŠ¶æ€
   - ç¡®è®¤å¸è½½å®Œæˆ

### å¿«é€Ÿå¸è½½æµç¨‹ï¼ˆ6 æ­¥ï¼‰

1. **åœæ­¢å®å¡”æœåŠ¡**
2. **åˆ é™¤é¢æ¿ç›®å½•**
3. **åˆ é™¤é…ç½®æ–‡ä»¶**
4. **ç¦ç”¨ç³»ç»ŸæœåŠ¡**
5. **æ¸…ç†å…¶ä»–æ–‡ä»¶**
6. **éªŒè¯å¸è½½ç»“æœ**

## ğŸ”§ è„šæœ¬å‚æ•°è¯´æ˜

### uninstall-bt.sh å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | `./uninstall-bt.sh --help` |
| `--skip-backup` | è·³è¿‡æ•°æ®å¤‡ä»½ | `./uninstall-bt.sh --skip-backup` |
| `--force` | å¼ºåˆ¶å¸è½½ï¼Œè·³è¿‡ç¡®è®¤ | `./uninstall-bt.sh --force` |
| `--auto-reboot` | å¸è½½å®Œæˆåè‡ªåŠ¨é‡å¯ | `./uninstall-bt.sh --auto-reboot` |

### ç»„åˆä½¿ç”¨ç¤ºä¾‹

```bash
# å¼ºåˆ¶å¸è½½ï¼Œè·³è¿‡å¤‡ä»½ï¼Œè‡ªåŠ¨é‡å¯
sudo ./uninstall-bt.sh --force --skip-backup --auto-reboot

# ä»…è·³è¿‡å¤‡ä»½ï¼Œå…¶ä»–äº¤äº’å¼
sudo ./uninstall-bt.sh --skip-backup
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å®å¡”æœåŠ¡åœä¸ä¸‹æ¥**
   ```bash
   # å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹
   pkill -9 -f "BT-Panel"
   pkill -9 -f "bt_panel"
   
   # æ£€æŸ¥è¿›ç¨‹
   ps aux | grep -i bt
   ```

2. **ç›®å½•åˆ é™¤å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ–‡ä»¶å ç”¨
   lsof +D /www/server/panel
   
   # å¼ºåˆ¶åˆ é™¤
   rm -rf /www/server/panel
   ```

3. **æœåŠ¡ç¦ç”¨å¤±è´¥**
   ```bash
   # æ‰‹åŠ¨åˆ é™¤æœåŠ¡æ–‡ä»¶
   rm -f /etc/systemd/system/bt*
   rm -f /lib/systemd/system/bt*
   
   # é‡è½½ systemd
   systemctl daemon-reload
   ```

4. **ç«¯å£ä»åœ¨ç›‘å¬**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep 8888
   
   # ç»ˆæ­¢å ç”¨è¿›ç¨‹
   fuser -k 8888/tcp
   ```

### éªŒè¯å¸è½½å®Œæˆ

```bash
# æ£€æŸ¥å®å¡”ç›®å½•
ls -la /www/server/panel
ls -la /etc/bt

# æ£€æŸ¥å®å¡”è¿›ç¨‹
ps aux | grep -i bt | grep -v grep

# æ£€æŸ¥å®å¡”æœåŠ¡
systemctl list-units --all | grep bt

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep -E "8888|888"
```

## ğŸ“ å¸è½½åæ¸…ç†

### å¯é€‰æ¸…ç†é¡¹ç›®

1. **æ¸…ç†ç”¨æˆ·å’Œç»„**
   ```bash
   # åˆ é™¤å®å¡”ç”¨æˆ·ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
   userdel -r bt 2>/dev/null || true
   ```

2. **æ¸…ç†è½¯ä»¶åŒ…**
   ```bash
   # å¸è½½å®å¡”å®‰è£…çš„è½¯ä»¶ï¼ˆè°¨æ…æ“ä½œï¼‰
   # æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æ€§å¸è½½
   ```

3. **æ¸…ç†æ—¥å¿—æ–‡ä»¶**
   ```bash
   # æ¸…ç†ç³»ç»Ÿæ—¥å¿—ä¸­çš„å®å¡”è®°å½•
   journalctl --vacuum-time=1d
   ```

## ğŸ”„ æ•°æ®æ¢å¤

### ä»å¤‡ä»½æ¢å¤

1. **è§£å‹å¤‡ä»½æ–‡ä»¶**
   ```bash
   tar -xzf bt-backup-*.tar.gz
   ```

2. **æŸ¥çœ‹å¤‡ä»½ä¿¡æ¯**
   ```bash
   cat bt-backup-*/backup-info.txt
   ```

3. **æ¢å¤é…ç½®æ–‡ä»¶**
   ```bash
   # é‡æ–°å®‰è£…å®å¡”åæ¢å¤é…ç½®
   cp -r bt-backup-*/bt-config/* /etc/bt/
   ```

4. **æ¢å¤ç½‘ç«™æ•°æ®**
   ```bash
   cp -r bt-backup-*/wwwroot/* /www/wwwroot/
   ```

5. **æ¢å¤æ•°æ®åº“**
   ```bash
   mysql < bt-backup-*/mysql/all-databases.sql
   ```

## âš ï¸ é‡è¦æé†’

1. **æ•°æ®å®‰å…¨**
   - å¸è½½å‰åŠ¡å¿…å¤‡ä»½é‡è¦æ•°æ®
   - ç¡®è®¤å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
   - æµ‹è¯•æ•°æ®æ¢å¤æµç¨‹

2. **ç³»ç»Ÿå½±å“**
   - å¸è½½ä¼šåˆ é™¤æ‰€æœ‰å®å¡”ç®¡ç†çš„ç½‘ç«™
   - å¯èƒ½å½±å“æ­£åœ¨è¿è¡Œçš„æœåŠ¡
   - å»ºè®®åœ¨ç»´æŠ¤æ—¶é—´çª—å£æ‰§è¡Œ

3. **ç½‘ç»œå®‰å…¨**
   - å¸è½½ååŠæ—¶æ›´æ–°é˜²ç«å¢™è§„åˆ™
   - å…³é—­ä¸å¿…è¦çš„ç«¯å£
   - æ£€æŸ¥ç³»ç»Ÿå®‰å…¨çŠ¶æ€

4. **æœåŠ¡è¿ç»­æ€§**
   - å¦‚æœ‰é‡è¦æœåŠ¡è¿è¡Œï¼Œè¯·æå‰è¿ç§»
   - å‡†å¤‡æ›¿ä»£çš„ç®¡ç†æ–¹æ¡ˆ
   - ç¡®ä¿ä¸šåŠ¡ä¸ä¸­æ–­

---

**æ³¨æ„**: å®å¡”é¢æ¿å¸è½½æ˜¯ä¸å¯é€†æ“ä½œï¼Œè¯·è°¨æ…æ‰§è¡Œå¹¶ç¡®ä¿æ•°æ®å®‰å…¨ï¼
